<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Autoevaluación: Epilepsia II - Power Semiotics</title>

  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&display=swap"
    rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* CSS ROBUSTO PARA EVITAR FONDO BLANCO */
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background-color: #020617 !important;
      /* Slate 950 */
      color: #e2e8f0 !important;
      /* Slate 200 */
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    .main-card {
      background-color: #0f172a !important;
      /* Slate 900 */
      border: 1px solid #1e293b !important;
      /* Slate 800 */
    }

    .question-text {
      color: #ffffff !important;
    }

    /* Animaciones */
    .slide-container {
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1);
    }

    .feedback-enter {
      animation: fadeIn 0.4s ease-out forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { slate: { 950: '#020617' } }
        }
      }
    }
  </script>
</head>

<body
  class="bg-slate-950 text-slate-200 min-h-screen flex flex-col selection:bg-cyan-500 selection:text-white overflow-hidden">

  <!-- Header / Progreso -->
  <div class="fixed top-0 left-0 w-full z-50 bg-slate-900/90 backdrop-blur-md border-b border-slate-800">
    <div class="max-w-3xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="index.html"
        class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-bold">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m15 18-6-6 6-6" />
        </svg>
        Salir
      </a>
      <div class="text-xs font-mono text-cyan-400 tracking-widest uppercase">Evaluación Clínica</div>
    </div>
    <div class="w-full h-1 bg-slate-800">
      <div id="global-progress" class="h-full bg-cyan-500 transition-all duration-500" style="width: 0%"></div>
    </div>
  </div>

  <main class="flex-1 w-full max-w-3xl mx-auto flex flex-col justify-center px-4 py-20 relative">

    <div class="overflow-hidden w-full relative">
      <div id="slides-wrapper" class="flex w-full slide-container">

        <!-- Slide de Inicio -->
        <div class="min-w-full flex-shrink-0 p-4 flex flex-col items-center justify-center text-center">
          <div class="main-card p-8 md:p-12 rounded-3xl shadow-2xl relative overflow-hidden max-w-lg w-full">
            <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-cyan-500 to-blue-600"></div>

            <div
              class="w-20 h-20 bg-cyan-900/20 rounded-2xl flex items-center justify-center mx-auto mb-8 text-cyan-400">
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z" />
                <path d="m9 12 2 2 4-4" />
              </svg>
            </div>

            <h1 class="text-3xl md:text-4xl font-extrabold text-white mb-4">
              Test de Certificación
            </h1>
            <p class="text-lg text-slate-400 mb-8">
              Neurología Módulo 6: <br />
              <span class="text-white font-semibold">Manejo Avanzado de Epilepsia</span>
            </p>

            <div
              class="space-y-4 text-left bg-slate-950/50 p-6 rounded-xl border border-slate-800 mb-8 text-sm text-slate-400">
              <div class="flex gap-3"><span class="text-cyan-500 font-bold">5</span> Preguntas de selección múltiple.
              </div>
              <div class="flex gap-3"><span class="text-cyan-500 font-bold">80%</span> Mínimo para aprobar.</div>
              <div class="flex gap-3"><span class="text-cyan-500 font-bold">Feedback</span> Inmediato tras cada
                respuesta.</div>
            </div>

            <button onclick="startQuiz()"
              class="w-full bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 px-6 rounded-xl shadow-lg shadow-cyan-900/20 transition-all hover:scale-[1.02] flex items-center justify-center gap-2">
              Comenzar Evaluación
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14" />
                <path d="m12 5 7 7-7 7" />
              </svg>
            </button>
          </div>
        </div>

      </div>
    </div>

  </main>

  <script>
    const quizData = [
      {
        question: "Un hombre de 40 años es traído a emergencias con una crisis tónico-clónica que ha durado 10 minutos. El equipo logra canalizar una vía IV. ¿Cuál es la intervención farmacológica de primera línea más apropiada en este momento?",
        options: [
          "Dosis de carga de Fenitoína IV.",
          "Infusión continua de Propofol.",
          "Inyección de Lorazepam IV.",
          "Inyección de Levetiracetam IM."
        ],
        correct: 2,
        explanation: "Las benzodiacepinas intravenosas (Lorazepam/Diazepam) son el tratamiento de emergencia de primera elección para yugular una crisis en un estado epiléptico establecido."
      },
      {
        question: "Una mujer de 22 años es diagnosticada con Epilepsia Mioclónica Juvenil (EMJ). ¿Cuál de los siguientes fármacos antiepilépticos es la opción de tratamiento más adecuada y específica para su síndrome?",
        options: [
          "Carbamazepina.",
          "Etosuximida.",
          "Ácido Valproico.",
          "Gabapentina."
        ],
        correct: 2,
        explanation: "El Ácido Valproico es el fármaco de primera línea para la EMJ porque es de amplio espectro y muy eficaz contra los tres tipos de crisis de este síndrome."
      },
      {
        question: "Un paciente en tratamiento por un estado epiléptico recibió dos dosis de diazepam sin éxito. Se decide administrar una dosis de carga de Fenitoína IV. ¿Qué parámetro se debe monitorizar de forma estricta durante la infusión?",
        options: [
          "Niveles de glucosa sérica.",
          "Presión arterial y electrocardiograma (ECG).",
          "Conteo de plaquetas.",
          "Función hepática."
        ],
        correct: 1,
        explanation: "La Fenitoína puede causar efectos cardiovasculares adversos (hipotensión severa y arritmias). La monitorización continua de PA y ECG es mandatoria."
      },
      {
        question: "Un paciente con epilepsia focal bien controlada con Carbamazepina presenta un episodio de sacudidas mioclónicas generalizadas. ¿Cuál es la razón más probable para que el neurólogo decida cambiar el tratamiento?",
        options: [
          "La Carbamazepina es muy costosa.",
          "La Carbamazepina puede empeorar las crisis mioclónicas.",
          "La Carbamazepina no tiene efecto en el cerebro.",
          "El paciente desarrolló una alergia súbita."
        ],
        correct: 1,
        explanation: "Ciertos FAE (ej. Carbamazepina) pueden paradójicamente exacerbar o provocar ciertos tipos de crisis generalizadas, como las mioclonías."
      },
      {
        question: "Según la definición operacional del estado epiléptico, ¿a partir de qué duración de una crisis convulsiva tónico-clónica se debe iniciar el tratamiento farmacológico de emergencia (tiempo T1)?",
        options: [
          "1 minuto.",
          "5 minutos.",
          "15 minutos.",
          "30 minutos."
        ],
        correct: 1,
        explanation: "Para las crisis tónico-clónicas, el umbral T1 es de 5 minutos, punto en el que se requiere intervención farmacológica inmediata."
      }
    ];

    const wrapper = document.getElementById('slides-wrapper');
    const progressBar = document.getElementById('global-progress');
    let currentSlide = 0;
    let score = 0;

    function startQuiz() {
      buildQuizDOM();
      goToSlide(1);
    }

    function buildQuizDOM() {
      quizData.forEach((q, idx) => {
        const slide = document.createElement('div');
        slide.className = 'min-w-full flex-shrink-0 p-4 flex flex-col items-center justify-center';
        slide.innerHTML = `
                    <div class="w-full max-w-2xl main-card rounded-3xl p-6 md:p-10 shadow-xl">
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-cyan-500 font-bold text-sm tracking-widest uppercase">Pregunta ${idx + 1} / ${quizData.length}</span>
                        </div>
                        
                        <h2 class="text-xl md:text-2xl font-bold question-text mb-8 leading-relaxed">
                            ${q.question}
                        </h2>

                        <div class="space-y-3" id="options-${idx}">
                            ${q.options.map((opt, optIdx) => `
                                <button onclick="handleAnswer(${idx}, ${optIdx})" class="w-full text-left p-5 rounded-xl border border-slate-700 bg-slate-800 hover:bg-slate-700 hover:border-cyan-500 transition-all group flex items-start gap-4">
                                    <span class="flex-shrink-0 w-8 h-8 rounded-full border border-slate-600 flex items-center justify-center text-slate-400 group-hover:border-cyan-500 group-hover:text-cyan-500 text-sm font-bold transition-colors">
                                        ${String.fromCharCode(65 + optIdx)}
                                    </span>
                                    <span class="text-slate-300 group-hover:text-white pt-1">${opt}</span>
                                </button>
                            `).join('')}
                        </div>

                        <div id="feedback-${idx}" class="hidden mt-6 p-5 rounded-xl bg-slate-800 border animate-fade-in">
                            </div>

                        <div id="nav-${idx}" class="hidden mt-6 flex justify-end">
                            <button onclick="goToSlide(${idx + 2})" class="bg-white text-slate-900 hover:bg-slate-200 font-bold py-3 px-8 rounded-lg shadow-lg transition-colors">
                                ${idx === quizData.length - 1 ? 'Ver Resultados' : 'Siguiente Pregunta →'}
                            </button>
                        </div>
                    </div>
                `;
        wrapper.appendChild(slide);
      });

      // Slide de Resultados
      const resultSlide = document.createElement('div');
      resultSlide.id = 'result-slide';
      resultSlide.className = 'min-w-full flex-shrink-0 p-4 flex flex-col items-center justify-center';
      wrapper.appendChild(resultSlide);
    }

    function handleAnswer(qIdx, optIdx) {
      const btns = document.getElementById(`options-${qIdx}`).children;
      const feedbackEl = document.getElementById(`feedback-${qIdx}`);
      const navEl = document.getElementById(`nav-${qIdx}`);
      const question = quizData[qIdx];
      const isCorrect = optIdx === question.correct;

      for (let btn of btns) {
        btn.disabled = true;
        btn.classList.add('opacity-50', 'cursor-not-allowed');
      }

      if (isCorrect) {
        btns[optIdx].classList.remove('opacity-50', 'bg-slate-800', 'border-slate-700');
        btns[optIdx].classList.add('bg-green-900/30', 'border-green-500', 'ring-1', 'ring-green-500');
        score++;

        feedbackEl.className = "mt-6 p-5 rounded-xl bg-green-900/30 border border-green-500/30 feedback-enter block";
        feedbackEl.innerHTML = `<div class="text-green-400 font-bold mb-1 flex items-center gap-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg> ¡Correcto!</div><p class="text-slate-300 text-sm">${question.explanation}</p>`;
      } else {
        btns[optIdx].classList.remove('opacity-50', 'bg-slate-800', 'border-slate-700');
        btns[optIdx].classList.add('bg-red-900/30', 'border-red-500');
        btns[question.correct].classList.remove('opacity-50', 'bg-slate-800', 'border-slate-700');
        btns[question.correct].classList.add('bg-green-900/30', 'border-green-500');

        feedbackEl.className = "mt-6 p-5 rounded-xl bg-red-900/30 border border-red-500/30 feedback-enter block";
        feedbackEl.innerHTML = `<div class="text-red-400 font-bold mb-1 flex items-center gap-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg> Incorrecto</div><p class="text-slate-300 text-sm">${question.explanation}</p>`;
      }
      navEl.classList.remove('hidden');
    }

    function goToSlide(index) {
      currentSlide = index;
      const percent = index * -100;
      wrapper.style.transform = `translateX(${percent}%)`;

      const progress = ((index - 1) / quizData.length) * 100;
      if (index > 0) progressBar.style.width = `${Math.max(0, Math.min(100, progress))}%`;

      if (index > quizData.length) {
        showResults();
      }
    }

    function showResults() {
      const resultSlide = document.getElementById('result-slide');
      const percentage = Math.round((score / quizData.length) * 100);
      let color = percentage >= 80 ? 'text-green-400' : (percentage >= 60 ? 'text-yellow-400' : 'text-red-400');
      let message = percentage >= 80 ? '¡Excelente Trabajo!' : 'Sigue Repasando';

      resultSlide.innerHTML = `
                <div class="main-card p-12 rounded-3xl shadow-2xl text-center max-w-lg w-full">
                    <h2 class="text-3xl font-bold text-white mb-2">Evaluación Finalizada</h2>
                    <p class="text-slate-400 mb-8">Resumen de rendimiento</p>
                    
                    <div class="w-32 h-32 rounded-full border-4 border-slate-800 flex items-center justify-center mx-auto mb-6 bg-slate-950 shadow-inner relative">
                         <svg class="absolute inset-0 w-full h-full -rotate-90" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="#1e293b" stroke-width="8" />
                            <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="8" stroke-dasharray="283" stroke-dashoffset="${283 - (283 * percentage / 100)}" class="${percentage >= 80 ? 'text-green-500' : (percentage >= 60 ? 'text-yellow-500' : 'text-red-500')} transition-all duration-1000" />
                        </svg>
                        <span class="text-3xl font-black ${color}">${percentage}%</span>
                    </div>

                    <h3 class="text-2xl font-bold text-white mb-2">${message}</h3>
                    <p class="text-slate-400 mb-8">Has respondido correctamente ${score} de ${quizData.length} preguntas.</p>

                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="location.reload()" class="p-4 rounded-xl border border-slate-700 text-slate-300 hover:bg-slate-800 transition-colors font-bold">
                            Volver a Intentar
                        </button>
                        <a href="index.html" class="p-4 rounded-xl bg-cyan-600 hover:bg-cyan-500 text-white transition-colors font-bold flex items-center justify-center">
                            Menú del Módulo
                        </a>
                    </div>
                </div>
            `;
    }
  </script>
</body>

</html>