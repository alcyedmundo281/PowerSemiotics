<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a Interactiva: Cuantificando la Incertidumbre en el Diagn√≥stico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
            padding: 0 1.5rem;
        }
        .accordion-button.active + .accordion-content {
            max-height: 5000px; /* Adjust as needed */
            padding: 1.5rem;
        }
        .accordion-button .icon {
            transition: transform 0.3s ease;
        }
        .accordion-button.active .icon {
            transform: rotate(180deg);
        }
        .interactive-highlight {
            background-color: #fef3c7;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: #92400e;
        }
        .quiz-option:hover {
            background-color: #e5e7eb;
        }
        .quiz-option.selected {
            background-color: #d1d5db;
        }
        .quiz-option.correct {
            background-color: #d1fae5;
            border-color: #10b981;
        }
        .quiz-option.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-900">Gu√≠a de Estudio Interactiva</h1>
            <p class="text-md text-gray-600">Cuantificando la Incertidumbre en el Diagn√≥stico M√©dico</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 md:p-8">
        
        <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
            <h2 class="text-xl font-bold mb-3 text-blue-700">¬°Bienvenido, futuro l√≠der en medicina!</h2>
            <p class="mb-4">Esta no es una gu√≠a de estudio tradicional. Es una misi√≥n de exploraci√≥n. Tu objetivo es navegar por los conceptos que definen el arte y la ciencia del diagn√≥stico moderno. Cada secci√≥n es una puerta a un nuevo nivel de entendimiento. ¬°Haz clic para descubrir, interactuar para aprender y ponte a prueba para conquistar!</p>
            <p class="font-semibold">¬øEst√°s listo para comenzar tu viaje?</p>
        </div>

        <!-- Accordion Sections -->
        <div id="accordion-container" class="space-y-4">

            <!-- Section 0: Introduction -->
            <div class="bg-white rounded-xl shadow-lg">
                <button class="accordion-button w-full flex justify-between items-center text-left p-6 font-bold text-lg text-gray-800 focus:outline-none">
                    <span>üöÄ Introducci√≥n: La Medicina como Ciencia de la Probabilidad</span>
                    <svg class="icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content">
                    <p class="mb-4">La pr√°ctica de la medicina es, en su esencia, un ejercicio de manejo de la incertidumbre. A diferencia de las ciencias exactas, la medicina trata con probabilidades, no con certezas absolutas. Esta gu√≠a te dar√° las herramientas para cuantificar, interpretar y comunicar esta incertidumbre, una competencia cl√≠nica esencial.</p>
                    <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                        <h4 class="font-bold mb-2">Dos Niveles de Incertidumbre:</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li><strong>Incertidumbre Metrol√≥gica:</strong> ¬øEs precisa la medici√≥n del laboratorio? Se enfoca en la variabilidad inherente al proceso de medici√≥n.</li>
                            <li><strong>Incertidumbre Diagn√≥stica:</strong> ¬øQu√© significa este resultado para mi paciente? Aborda la probabilidad de que un paciente tenga o no una enfermedad.</li>
                        </ul>
                    </div>
                     <p class="mt-4">Para navegar esta incertidumbre, usamos herramientas como <span class="interactive-highlight">sensibilidad</span>, <span class="interactive-highlight">especificidad</span>, <span class="interactive-highlight">valores predictivos</span> y <span class="interactive-highlight">curvas ROC</span>. Son el lenguaje para traducir datos en probabilidades cl√≠nicamente significativas.</p>
                </div>
            </div>

            <!-- Section 1: Sensitivity and Specificity -->
            <div class="bg-white rounded-xl shadow-lg">
                <button class="accordion-button w-full flex justify-between items-center text-left p-6 font-bold text-lg text-gray-800 focus:outline-none">
                    <span>üéØ Secci√≥n 1: Pilares de la Validez - Sensibilidad y Especificidad</span>
                    <svg class="icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content">
                    <p class="mb-4">Para evaluar una prueba, la comparamos con un "gold standard". Los resultados se organizan en la famosa tabla de 2x2, la base de todo.</p>
                    <div class="overflow-x-auto mb-4">
                        <table class="min-w-full bg-white border border-gray-300 rounded-lg">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="py-2 px-4 border-b"></th>
                                    <th class="py-2 px-4 border-b">Enfermedad Presente</th>
                                    <th class="py-2 px-4 border-b">Enfermedad Ausente</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="py-2 px-4 border-b font-bold">Prueba Positiva</td>
                                    <td class="py-2 px-4 border-b text-center bg-green-50">Verdaderos Positivos (VP)</td>
                                    <td class="py-2 px-4 border-b text-center bg-red-50">Falsos Positivos (FP)</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b font-bold">Prueba Negativa</td>
                                    <td class="py-2 px-4 border-b text-center bg-red-50">Falsos Negativos (FN)</td>
                                    <td class="py-2 px-4 border-b text-center bg-green-50">Verdaderos Negativos (VN)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                            <h4 class="font-bold mb-2">Sensibilidad (S)</h4>
                            <p>La capacidad de la prueba para <strong class="text-green-700">identificar correctamente a los enfermos</strong>. Ideal para pruebas de cribado (screening) donde no quieres dejar pasar ning√∫n caso.</p>
                            <p class="mt-2 font-mono bg-green-100 p-2 rounded">S = VP / (VP + FN)</p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                            <h4 class="font-bold mb-2">Especificidad (E)</h4>
                            <p>La capacidad de la prueba para <strong class="text-blue-700">descartar correctamente a los sanos</strong>. Crucial para pruebas de confirmaci√≥n, para evitar tratamientos innecesarios.</p>
                            <p class="mt-2 font-mono bg-blue-100 p-2 rounded">E = VN / (VN + FP)</p>
                        </div>
                    </div>
                    <p class="mt-4 font-semibold">Recuerda: Sensibilidad y especificidad son propiedades intr√≠nsecas de la prueba y no dependen de qu√© tan com√∫n (prevalencia) es la enfermedad.</p>
                </div>
            </div>

            <!-- Section 2: Predictive Values -->
            <div class="bg-white rounded-xl shadow-lg">
                <button class="accordion-button w-full flex justify-between items-center text-left p-6 font-bold text-lg text-gray-800 focus:outline-none">
                    <span>üîç Secci√≥n 2: De la Validez a la Utilidad - Valores Predictivos y Prevalencia</span>
                    <svg class="icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content">
                    <p class="mb-4">Aqu√≠ es donde la estad√≠stica se encuentra con la realidad cl√≠nica. Un paciente pregunta: "Doctor, mi prueba es positiva, ¬øestoy enfermo?". La respuesta depende de los valores predictivos.</p>
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                            <h4 class="font-bold mb-2">Valor Predictivo Positivo (VPP)</h4>
                            <p>Probabilidad de que un paciente con un resultado <strong class="text-yellow-700">positivo</strong> realmente tenga la enfermedad.</p>
                            <p class="mt-2 font-mono bg-yellow-100 p-2 rounded">VPP = VP / (VP + FP)</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                            <h4 class="font-bold mb-2">Valor Predictivo Negativo (VPN)</h4>
                            <p>Probabilidad de que un paciente con un resultado <strong class="text-purple-700">negativo</strong> realmente est√© sano.</p>
                            <p class="mt-2 font-mono bg-purple-100 p-2 rounded">VPN = VN / (VN + FN)</p>
                        </div>
                    </div>
                    <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-500">
                        <h4 class="font-bold text-red-800 mb-2">¬°El Factor Decisivo: La Prevalencia!</h4>
                        <p class="mb-4">A diferencia de S y E, los valores predictivos dependen <strong class="text-red-700">enormemente</strong> de qu√© tan com√∫n es la enfermedad (prevalencia) en la poblaci√≥n que est√°s estudiando. ¬°Vamos a demostrarlo!</p>
                        
                        <div class="bg-white p-4 rounded-lg shadow-inner">
                            <h5 class="font-bold mb-4 text-center">Calculadora Interactiva de Prevalencia</h5>
                            <p class="text-sm text-center mb-4">Usemos una prueba con <strong>Sensibilidad del 99%</strong> y <strong>Especificidad del 95%</strong> en una poblaci√≥n de 10,000 personas. Mueve el control deslizante para cambiar la prevalencia y observa c√≥mo cambia el VPP.</p>
                            
                            <div class="mb-4">
                                <label for="prevalence-slider" class="block font-semibold mb-2">Prevalencia: <span id="prevalence-value">5</span>%</label>
                                <input type="range" id="prevalence-slider" min="0.1" max="50" step="0.1" value="5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            </div>

                            <div class="grid grid-cols-2 gap-4 text-center">
                                <div>
                                    <p class="text-sm font-bold text-gray-600">VPP</p>
                                    <p id="vpp-result" class="text-3xl font-bold text-yellow-600">51.0%</p>
                                </div>
                                <div>
                                    <p class="text-sm font-bold text-gray-600">VPN</p>
                                    <p id="vpn-result" class="text-3xl font-bold text-purple-600">99.9%</p>
                                </div>
                            </div>
                            <p id="vpp-explanation" class="text-sm mt-4 text-center text-gray-700">Con una prevalencia del 5%, un resultado positivo solo es correcto la mitad de las veces.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 3: ROC Curves -->
            <div class="bg-white rounded-xl shadow-lg">
                <button class="accordion-button w-full flex justify-between items-center text-left p-6 font-bold text-lg text-gray-800 focus:outline-none">
                    <span>üìà Secci√≥n 3: El Panorama Completo - Curvas ROC</span>
                    <svg class="icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content">
                    <p class="mb-4">Muchas pruebas no son "positivas" o "negativas", sino que dan un valor continuo (ej. glucemia). ¬øD√≥nde ponemos el punto de corte? La curva ROC (Receiver Operating Characteristic) nos muestra el rendimiento de la prueba en <strong class="interactive-highlight">todos</strong> los puntos de corte posibles.</p>
                    <div class="bg-gray-100 p-4 rounded-lg text-center">
                        <img src="/assets/images/AUC-ROC.png" alt="Ejemplo de una curva ROC" class="mx-auto rounded-lg shadow-md mb-2">
                        <p class="text-sm text-gray-600">La curva ROC grafica Sensibilidad vs. 1 - Especificidad. Cuanto m√°s se "abomba" hacia la esquina superior izquierda, mejor es la prueba.</p>
                    </div>
                    <div class="mt-6">
                        <h4 class="font-bold mb-2">El √Årea Bajo la Curva (AUC)</h4>
                        <p>Es un n√∫mero √∫nico que resume el poder discriminatorio total de la prueba. Va de 0.5 (in√∫til, como lanzar una moneda) a 1.0 (perfecta).</p>
                        <ul class="list-disc list-inside bg-blue-50 p-4 rounded-lg mt-2 space-y-1">
                            <li><strong>0.90 - 1.00:</strong> Excelente</li>
                            <li><strong>0.80 - 0.90:</strong> Bueno</li>
                            <li><strong>0.70 - 0.80:</strong> Aceptable</li>
                            <li><strong>< 0.70:</strong> Pobre / No √∫til</li>
                        </ul>
                    </div>
                    <div class="mt-6 bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                        <h4 class="font-bold mb-2">¬°Pon a prueba tu conocimiento!</h4>
                        <div class="quiz-container" data-quiz-id="1">
                            <p class="mb-2">Una nueva prueba para la enfermedad X tiene un AUC de 0.95. Una prueba est√°ndar existente tiene un AUC de 0.82. ¬øQu√© significa esto?</p>
                            <div class="space-y-2">
                                <button class="quiz-option w-full text-left p-3 border rounded-lg" data-correct="false">La nueva prueba es m√°s barata que la est√°ndar.</button>
                                <button class="quiz-option w-full text-left p-3 border rounded-lg" data-correct="true">La nueva prueba tiene una capacidad discriminatoria globalmente superior a la prueba est√°ndar.</button>
                                <button class="quiz-option w-full text-left p-3 border rounded-lg" data-correct="false">La nueva prueba es m√°s sensible pero menos espec√≠fica que la est√°ndar.</button>
                            </div>
                            <p class="quiz-feedback mt-2 text-sm font-semibold hidden"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Case Studies -->
            <div class="bg-white rounded-xl shadow-lg">
                <button class="accordion-button w-full flex justify-between items-center text-left p-6 font-bold text-lg text-gray-800 focus:outline-none">
                    <span>üî¨ Secci√≥n 4: Aplicaci√≥n Pr√°ctica - Estudios de Caso</span>
                    <svg class="icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content">
                    <p class="mb-4">Veamos c√≥mo estos conceptos se aplican en el mundo real.</p>
                    <div class="space-y-4">
                        <div class="p-4 border rounded-lg">
                            <h4 class="font-bold">Caso 1: Diagn√≥stico de Diabetes con HbA1c</h4>
                            <p>La ADA recomienda un punto de corte de ‚â•6.5%. Esto se eligi√≥ por su <strong class="interactive-highlight">alta especificidad</strong> (minimiza falsos positivos), aunque su sensibilidad no sea la m√°s alta. Es una decisi√≥n cl√≠nica para evitar diagnosticar err√≥neamente a personas sanas.</p>
                        </div>
                        <div class="p-4 border rounded-lg">
                            <h4 class="font-bold">Caso 2: Diagn√≥stico del VIH</h4>
                            <p>Este es el ejemplo perfecto de algoritmos secuenciales. Se usa una prueba de cribado de <strong class="interactive-highlight">alta sensibilidad</strong> (ELISA) para no dejar pasar a nadie. Luego, los positivos se confirman con una prueba de <strong class="interactive-highlight">alta especificidad</strong> (Western Blot) para asegurar el diagn√≥stico y evitar el devastador impacto de un falso positivo.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Limitations & Human Factor -->
            <div class="bg-white rounded-xl shadow-lg">
                <button class="accordion-button w-full flex justify-between items-center text-left p-6 font-bold text-lg text-gray-800 focus:outline-none">
                    <span>üß† Secci√≥n 5: La Dimensi√≥n Humana - Limitaciones y Sesgos</span>
                    <svg class="icon w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="accordion-content">
                    <p class="mb-4">Las estad√≠sticas son poderosas, pero el razonamiento cl√≠nico no es un algoritmo. Est√° influenciado por atajos mentales y sesgos cognitivos que pueden llevar a errores.</p>
                    <h4 class="font-bold mb-2">Sesgos Cognitivos Comunes:</h4>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong>Anclaje y Cierre Prematuro:</strong> Aferrarse a un diagn√≥stico inicial e ignorar nueva informaci√≥n.</li>
                        <li><strong>Sesgo de Confirmaci√≥n:</strong> Buscar evidencia que apoye tu idea inicial y descartar la que la contradice.</li>
                        <li><strong>Sesgo de Disponibilidad:</strong> Pensar en un diagn√≥stico porque lo viste recientemente o es muy dram√°tico, no porque sea el m√°s probable.</li>
                    </ul>
                    <div class="mt-6 bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                        <h4 class="font-bold mb-2">¬°Pon a prueba tu conocimiento!</h4>
                        <div class="quiz-container" data-quiz-id="2">
                            <p class="mb-2">Un paciente llega con dolor de cabeza. Acabas de leer un art√≠culo sobre tumores cerebrales raros y te enfocas en esa posibilidad, ordenando una RMN de inmediato a pesar de que los signos apuntan a una migra√±a com√∫n. ¬øQu√© sesgo est√°s demostrando?</p>
                            <div class="space-y-2">
                                <button class="quiz-option w-full text-left p-3 border rounded-lg" data-correct="false">Sesgo de Confirmaci√≥n</button>
                                <button class="quiz-option w-full text-left p-3 border rounded-lg" data-correct="false">Anclaje</button>
                                <button class="quiz-option w-full text-left p-3 border rounded-lg" data-correct="true">Sesgo de Disponibilidad</button>
                            </div>
                            <p class="quiz-feedback mt-2 text-sm font-semibold hidden"></p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="container mx-auto px-6 py-4 text-center">
            <p>&copy; 2025 - Gu√≠a de Estudio para Medicina y Ciencia.</p>
            <p class="text-sm text-gray-400">Creado para inspirar a la pr√≥xima generaci√≥n de m√©dicos.</p>
        </div>
    </footer>

    <script>
        // Accordion functionality
        const accordionButtons = document.querySelectorAll('.accordion-button');
        accordionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const currentlyActive = document.querySelector('.accordion-button.active');
                if (currentlyActive && currentlyActive !== button) {
                    currentlyActive.classList.remove('active');
                }
                button.classList.toggle('active');
            });
        });

        // Interactive prevalence calculator
        const slider = document.getElementById('prevalence-slider');
        const prevalenceValue = document.getElementById('prevalence-value');
        const vppResult = document.getElementById('vpp-result');
        const vpnResult = document.getElementById('vpn-result');
        const vppExplanation = document.getElementById('vpp-explanation');

        slider.addEventListener('input', () => {
            const prevalence = parseFloat(slider.value);
            prevalenceValue.textContent = prevalence.toFixed(1);
            
            // Fixed values for Sens (0.99) and Spec (0.95)
            const sens = 0.99;
            const spec = 0.95;
            const population = 10000;
            
            const enfermos = population * (prevalence / 100);
            const sanos = population - enfermos;
            
            const vp = enfermos * sens;
            const fn = enfermos * (1 - sens);
            const vn = sanos * spec;
            const fp = sanos * (1 - spec);
            
            const vpp = (vp / (vp + fp)) * 100;
            const vpn = (vn / (vn + fn)) * 100;
            
            vppResult.textContent = (isNaN(vpp) ? 0 : vpp.toFixed(1)) + '%';
            vpnResult.textContent = (isNaN(vpn) ? 100 : vpn.toFixed(1)) + '%';

            if (prevalence < 1) {
                vppExplanation.textContent = `Con una prevalencia tan baja, ¬°un resultado positivo tiene una probabilidad muy alta de ser un FALSO positivo!`;
            } else if (prevalence > 20) {
                 vppExplanation.textContent = `En un entorno de alta prevalencia, un resultado positivo es mucho m√°s fiable.`;
            } else {
                 vppExplanation.textContent = `Incluso con una prevalencia moderada, el VPP puede ser sorprendentemente bajo.`;
            }
        });

        // Quiz functionality
        const quizContainers = document.querySelectorAll('.quiz-container');
        quizContainers.forEach(container => {
            const options = container.querySelectorAll('.quiz-option');
            const feedback = container.querySelector('.quiz-feedback');
            let answered = false;

            options.forEach(option => {
                option.addEventListener('click', () => {
                    if (answered) return;
                    answered = true;

                    options.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');

                    const isCorrect = option.getAttribute('data-correct') === 'true';

                    if (isCorrect) {
                        option.classList.add('correct');
                        feedback.textContent = '¬°Correcto! Excelente razonamiento.';
                        feedback.classList.remove('hidden', 'text-red-600');
                        feedback.classList.add('text-green-600');
                    } else {
                        option.classList.add('incorrect');
                        feedback.textContent = 'No del todo. ¬°Intenta pensar en la definici√≥n de nuevo!';
                        feedback.classList.remove('hidden', 'text-green-600');
                        feedback.classList.add('text-red-600');
                        // Highlight the correct answer
                        container.querySelector('[data-correct="true"]').classList.add('correct');
                    }
                });
            });
        });
    </script>

</body>
</html>
