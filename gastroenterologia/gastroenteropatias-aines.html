<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Módulo Interactivo: Gastroenteropatías por AINEs</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary-color: #1e3a8a; /* blue-800 */
        --secondary-color: #1d4ed8; /* blue-700 */
        --background-color: #f1f5f9; /* slate-100 */
        --text-color: #1e293b; /* slate-800 */
        --card-bg: #ffffff;
        --accent-color: #e0e7ff; /* indigo-100 */
        --success-color: #16a34a; /* green-600 */
        --danger-color: #dc2626; /* red-600 */
        --warning-color: #f59e0b; /* amber-500 */
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        margin: 0;
        display: flex;
        height: 100vh;
        overflow: hidden;
      }

      /* --- Layout Principal --- */
      #app-container {
        display: flex;
        width: 100%;
        height: 100%;
      }

      aside#side-nav {
        width: 280px;
        background-color: var(--card-bg);
        padding: 25px;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
        z-index: 10;
      }

      main#content-area {
        flex-grow: 1;
        padding: 30px;
        overflow-y: auto;
        display: flex;
        justify-content: center;
        align-items: flex-start;
      }

      #content-wrapper {
        width: 100%;
        height: 100%;
        max-width: 1200px;
      }

      /* --- Panel de Navegación --- */
      #side-nav h1 {
        color: var(--primary-color);
        font-size: 1.4em;
        margin: 0 0 30px 0;
        border-bottom: 2px solid var(--accent-color);
        padding-bottom: 15px;
      }
      #side-nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      #side-nav li a {
        display: flex;
        align-items: center;
        padding: 15px;
        color: var(--secondary-color);
        text-decoration: none;
        border-radius: 8px;
        margin-bottom: 10px;
        font-weight: 500;
        transition:
          background-color 0.3s,
          color 0.3s;
      }
      #side-nav li a .fa-solid {
        margin-right: 15px;
        width: 20px;
        text-align: center;
      }
      #side-nav li a:hover {
        background-color: var(--accent-color);
      }
      #side-nav li a.active {
        background-color: var(--primary-color);
        color: white;
        font-weight: bold;
        box-shadow: 0 4px 8px rgba(30, 58, 138, 0.2);
      }

      /* --- Estilos Generales de Componentes --- */
      .component-container {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      /* --- Estilos de la Presentación --- */
      #presentation-container {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
      }
      .slide {
        background-color: var(--card-bg);
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        width: 100%;
        flex-grow: 1;
        padding: 30px 40px;
        box-sizing: border-box;
        display: none;
        flex-direction: column;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        overflow-y: auto;
      }
      .slide.active {
        display: flex;
        opacity: 1;
      }
      .slide h2,
      .slide h3 {
        color: var(--primary-color);
        margin-bottom: 20px;
        width: 100%;
        border-bottom: 2px solid var(--secondary-color);
        padding-bottom: 10px;
      }
      .slide h2 {
        font-size: 1.8em;
      }
      .slide h3 {
        font-size: 1.4em;
        color: var(--secondary-color);
        border-bottom: 1px solid #ccc;
      }
      .slide p,
      .slide ul,
      .slide li {
        font-size: 1.1em;
        line-height: 1.6;
      }
      .slide ul {
        list-style-type: none;
        padding-left: 20px;
      }
      .slide li::before {
        content: '✓';
        color: var(--secondary-color);
        font-weight: bold;
        display: inline-block;
        width: 1.2em;
        margin-left: -1.2em;
      }
      .title-slide {
        justify-content: center;
        align-items: center;
        text-align: center;
      }
      .title-slide h1 {
        font-size: 2.2em;
        border-bottom: none;
      }
      .navigation {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        padding-top: 20px;
        flex-shrink: 0;
      }
      .nav-button {
        background-color: var(--secondary-color);
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 1em;
        border-radius: 5px;
        cursor: pointer;
        margin: 0 10px;
        transition: background-color 0.3s;
      }
      .nav-button:disabled {
        background-color: #9ca3af;
        cursor: not-allowed;
      }
      #slide-counter {
        font-size: 1.1em;
        color: var(--text-color);
        font-weight: bold;
      }

      /* --- Estilos de la Herramienta de Decisión --- */
      .decision-tool-card {
        background-color: var(--card-bg);
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .decision-tool-card h2,
      .quiz-card h2 {
        color: var(--primary-color);
        border-bottom: 2px solid var(--accent-color);
        padding-bottom: 10px;
        margin-bottom: 20px;
      }
      .risk-factors {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }
      .risk-factors h3 {
        font-size: 1.2em;
        color: var(--secondary-color);
        margin-bottom: 10px;
      }
      .risk-factors label {
        display: block;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
      }
      .risk-factors input[type='radio'] {
        display: none;
      }
      .risk-factors input[type='radio']:checked + label {
        background-color: var(--accent-color);
        border-color: var(--secondary-color);
        font-weight: bold;
      }
      #decision-result {
        margin-top: 25px;
        padding: 20px;
        border-radius: 8px;
        border-left: 5px solid;
        display: none;
      }
      #decision-result.safe {
        border-color: var(--success-color);
      }
      #decision-result.warning {
        border-color: var(--warning-color);
      }
      #decision-result.danger {
        border-color: var(--danger-color);
      }
      #decision-result h3 {
        margin-top: 0;
      }

      /* --- Estilos de la Autoevaluación --- */
      .quiz-card {
        background-color: var(--card-bg);
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      #question-container p {
        font-size: 1.2em;
        font-weight: 500;
      }
      .quiz-options {
        list-style: none;
        padding: 0;
      }
      .quiz-options li {
        background-color: #f8fafc;
        border: 1px solid #e2e8f0;
        padding: 15px;
        border-radius: 8px;
        cursor: pointer;
        margin-bottom: 10px;
        transition: background-color 0.3s;
      }
      .quiz-options li:hover {
        background-color: var(--accent-color);
      }
      .quiz-options li.correct {
        background-color: #dcfce7;
        border-color: var(--success-color);
      }
      .quiz-options li.incorrect {
        background-color: #fee2e2;
        border-color: var(--danger-color);
      }
      #feedback-text {
        margin-top: 15px;
        padding: 10px;
        border-radius: 5px;
        font-size: 1.1em;
      }

      @media (max-width: 900px) {
        #app-container {
          flex-direction: column;
        }
        aside#side-nav {
          width: 100%;
          height: auto;
          flex-direction: row;
          overflow-x: auto;
          padding: 10px;
          justify-content: center;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        #side-nav h1 {
          display: none;
        }
        #side-nav ul {
          display: flex;
          flex-wrap: nowrap;
        }
        #side-nav li a {
          flex-direction: column;
          text-align: center;
          font-size: 0.8em;
          padding: 10px;
          white-space: nowrap;
        }
        #side-nav li a .fa-solid {
          margin-right: 0;
          margin-bottom: 5px;
        }
        main#content-area {
          padding: 15px;
        }
      }
    </style>
  </head>
  <body>
    <div id="app-container">
      <aside id="side-nav">
        <h1>Gastroenteropatías por AINEs</h1>
        <nav>
          <ul>
            <li>
              <a
                href="#"
                class="nav-link active"
                data-template="presentation-template"
                ><i class="fa-solid fa-book-open"></i> Base de Conocimiento</a
              >
            </li>
            <li>
              <a
                href="#"
                class="nav-link"
                data-template="decision-tool-template"
                ><i class="fa-solid fa-shield-halved"></i> Herramienta de
                Prevención</a
              >
            </li>
            <li>
              <a href="#" class="nav-link" data-template="quiz-template"
                ><i class="fa-solid fa-vial-circle-check"></i> Autoevaluación</a
              >
            </li>
          </ul>
        </nav>
      </aside>

      <main id="content-area">
        <div id="content-wrapper"></div>
      </main>
    </div>

    <!-- ########## TEMPLATES ########## -->

    <template id="presentation-template">
      <div class="component-container">
        <div id="presentation-container"></div>
        <div class="navigation">
          <button id="prev-btn" class="nav-button">Anterior</button>
          <span id="slide-counter"></span>
          <button id="next-btn" class="nav-button">Siguiente</button>
        </div>
      </div>
    </template>

    <template id="decision-tool-template">
      <div class="component-container">
        <div class="decision-tool-card">
          <h2>Herramienta de Decisión Preventiva</h2>
          <p>
            Seleccione el perfil de riesgo del paciente para determinar la
            estrategia más segura si se necesita un AINE.
          </p>
          <div class="risk-factors">
            <div>
              <h3>Riesgo Gastrointestinal (GI)</h3>
              <div id="gi-risk-options">
                <input
                  type="radio"
                  id="gi-low"
                  name="gi_risk"
                  value="low"
                /><label for="gi-low">Bajo (Sin factores de riesgo)</label>
                <input
                  type="radio"
                  id="gi-high"
                  name="gi_risk"
                  value="high"
                /><label for="gi-high"
                  >Alto (>65 años, historia de úlcera, uso de
                  corticoides/anticoagulantes, etc.)</label
                >
              </div>
            </div>
            <div>
              <h3>Riesgo Cardiovascular (CV)</h3>
              <div id="cv-risk-options">
                <input
                  type="radio"
                  id="cv-low"
                  name="cv_risk"
                  value="low"
                /><label for="cv-low">Bajo (Sin enfermedad CV)</label>
                <input
                  type="radio"
                  id="cv-high"
                  name="cv_risk"
                  value="high"
                /><label for="cv-high">Alto (Enfermedad CV establecida)</label>
              </div>
            </div>
          </div>
          <button id="analyze-btn" class="nav-button" style="margin-top: 20px">
            Analizar Riesgo
          </button>
          <div id="decision-result">
            <h3 id="result-title"></h3>
            <p id="result-rationale"></p>
          </div>
        </div>
      </div>
    </template>

    <template id="quiz-template">
      <div class="component-container">
        <div class="quiz-card">
          <h2>Autoevaluación</h2>
          <div id="quiz-container">
            <div id="question-container">
              <p id="question-text"></p>
              <ul class="quiz-options" id="quiz-options"></ul>
            </div>
            <div id="feedback-text"></div>
            <button
              id="next-question-btn"
              class="nav-button"
              style="display: none; margin-top: 15px"
            >
              Siguiente Pregunta
            </button>
          </div>
          <div
            id="quiz-result-container"
            style="display: none; text-align: center"
          >
            <h3>¡Evaluación Completada!</h3>
            <p id="score-text"></p>
            <button id="restart-quiz-btn" class="nav-button">
              Repetir Evaluación
            </button>
          </div>
        </div>
      </div>
    </template>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const contentWrapper = document.getElementById('content-wrapper');
        const navLinks = document.querySelectorAll('.nav-link');
        const templates = {
          'presentation-template': initPresentation,
          'decision-tool-template': initDecisionTool,
          'quiz-template': initQuiz,
        };

        function loadContent(templateId) {
          contentWrapper.innerHTML = '';
          const template = document.getElementById(templateId);
          if (template) {
            contentWrapper.appendChild(template.content.cloneNode(true));
            if (templates[templateId]) templates[templateId]();
          }
        }

        navLinks.forEach((link) => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            navLinks.forEach((l) => l.classList.remove('active'));
            link.classList.add('active');
            loadContent(link.dataset.template);
          });
        });

        loadContent('presentation-template'); // Carga inicial
      });

      // --- LÓGICA DE LA PRESENTACIÓN ---
      function initPresentation() {
        const container = document.getElementById('presentation-container');
        if (!container) return;

        const slidesContent = [
          `<div class="slide title-slide"><h1>Alteraciones Gastrointestinales Inducidas por AINEs</h1><p>Un problema frecuente con implicaciones graves</p></div>`,
          `<div class="slide"><h2>Fisiopatología: El Dilema COX-1 vs. COX-2</h2><ul><li><strong>Prostaglandinas (PGs):</strong> Son cruciales para la defensa de la mucosa gástrica (moco, bicarbonato, flujo sanguíneo).</li><li><strong>COX-1:</strong> Enzima 'buena' en el estómago. Produce PGs protectoras. Los AINEs tradicionales (Ibuprofeno, Naproxeno) la inhiben, causando daño.</li><li><strong>COX-2:</strong> Enzima 'mala' en la inflamación. Los AINEs selectivos (COXIBs) la atacan preferentemente, reduciendo el daño GI superior.</li><li><strong>Daño Tópico:</strong> AINEs ácidos también pueden dañar directamente la mucosa.</li></ul></div>`,
          `<div class="slide"><h2>Espectro Clínico: Tracto GI Superior</h2><h3>Desde dispepsia hasta emergencias</h3><ul><li><strong>Síntoma más común:</strong> Dispepsia (dolor/malestar en epigastrio).</li><li><strong>Lesiones endoscópicas:</strong> Erosiones, gastritis hemorrágica y úlceras pépticas (gástricas o duodenales).</li><li><strong>Complicaciones Graves:</strong><ul><li><strong>Hemorragia Digestiva Alta (HDA):</strong> La más frecuente. Se manifiesta como hematemesis o melena.</li><li><strong>Perforación:</strong> Úlcera que atraviesa la pared gástrica. ¡Emergencia quirúrgica!</li><li><strong>Obstrucción:</strong> Por cicatrización de úlceras cerca del píloro.</li></ul></li></ul></div>`,
          `<div class="slide"><h2>Espectro Clínico: Tracto GI Inferior</h2><h3>La \"Enteropatía por AINEs\"</h3><ul><li>Daño a menudo silencioso en intestino delgado y colon.</li><li><strong>Manifestación frecuente:</strong> Anemia ferropénica inexplicada por sangrado crónico oculto.</li><li><strong>Otras lesiones:</strong> Úlceras, enteropatía perdedora de proteínas (hipoalbuminemia) y estenosis diafragmáticas (estrechamientos anulares).</li><li><strong>Diagnóstico:</strong> Cápsula endoscópica es la herramienta de elección para el intestino delgado.</li></ul></div>`,
          `<div class="slide"><h2>Factores de Riesgo Clave</h2><h3>¿Quién está en mayor peligro?</h3><ul><li><strong>Historia previa de úlcera o complicación GI:</strong> El factor de riesgo más importante.</li><li><strong>Edad > 65 años.</strong></li><li><strong>Uso de dosis altas o múltiples AINEs</strong> (incluye AINE + Aspirina).</li><li><strong>Uso concomitante de:</strong> Corticoides, anticoagulantes, antiagregantes (clopidogrel), ISRS.</li><li><strong>Infección por <em>H. pylori</em>.</strong></li></ul></div>`,
          `<div class="slide"><h2>Estrategias de Prevención</h2><h3>Proteger el Tracto GI</h3><ul><li><strong>Paso 1:</strong> Evaluar si el AINE es realmente necesario. Usar la dosis más baja por el menor tiempo posible.</li><li><strong>Gastroprotección Farmacológica (en pacientes de riesgo):</strong><ul><li><strong>Inhibidores de Bomba de Protones (IBPs):</strong> Omeprazol, Esomeprazol, etc. Son los más eficaces y de elección.</li><li><strong>AINEs COX-2 Selectivos (COXIBs):</strong> Menor riesgo GI superior, pero se debe considerar el riesgo cardiovascular del paciente.</li></ul></li></ul></div>`,
          `<div class="slide"><h2>Algoritmo de Prevención: Balance GI vs. CV</h2><h3>Elegir la opción más segura</h3><ul><li><strong>Alto Riesgo GI, Bajo Riesgo CV:</strong> AINE no selectivo + IBP, o un COXIB.</li><li><strong>Alto Riesgo CV, Bajo Riesgo GI:</strong> Naproxeno (menor riesgo CV) + IBP. Evitar COXIBs.</li><li><strong>Alto Riesgo GI y CV:</strong> <strong>¡EVITAR AINEs si es posible!</strong> Buscar alternativas analgésicas. Si es indispensable, Naproxeno + IBP es la opción menos perjudicial.</li></ul></div>`,
          `<div class="slide"><h2>Manejo de la Lesión Establecida</h2><h3>¿Qué hacer cuando el daño ya ocurrió?</h3><ul><li><strong>Pilar del tratamiento:</strong> ¡Suspender el AINE siempre que sea posible!</li><li><strong>Curación de la úlcera:</strong> Iniciar tratamiento con IBP a dosis terapéuticas por 4-8 semanas.</li><li><strong>Erradicar <em>H. pylori</em>:</strong> Si está presente, es fundamental para la cicatrización y prevención de recurrencias.</li><li><strong>Reevaluación:</strong> Si el AINE es indispensable, reiniciar con la estrategia más segura (ej. COXIB + IBP) una vez curada la lesión.</li></ul></div>`,
          `<div class="slide"><h2>Contexto en Ecuador</h2><h3>Un Desafío de Salud Pública</h3><ul><li><strong>Automedicación:</strong> El uso indiscriminado y sin prescripción de AINEs es muy común.</li><li><strong>Educación al paciente:</strong> Es rol del médico advertir sobre los riesgos, especialmente a pacientes con factores de riesgo.</li><li><strong>Considerar prevalencia de <em>H. pylori</em>:</strong> Puede ser alta, justificando su búsqueda y erradicación en usuarios de AINEs con historia de úlcera.</li></ul></div>`,
          `<div class="slide title-slide"><h2>Conclusión</h2><p>El uso de AINEs requiere un balance cuidadoso entre beneficio y riesgo. La estratificación del riesgo y la aplicación de estrategias preventivas son clave para minimizar las complicaciones gastrointestinales.</p></div>`,
        ];

        container.innerHTML = slidesContent.join('');
        const slides = container.querySelectorAll('.slide');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const slideCounter = document.getElementById('slide-counter');

        let currentSlideIndex = 0;
        const totalSlides = slides.length;

        function showSlide(index) {
          slides.forEach((s, i) => s.classList.toggle('active', i === index));
          slideCounter.textContent = `${index + 1} / ${totalSlides}`;
          prevBtn.disabled = index === 0;
          nextBtn.disabled = index === totalSlides - 1;
        }

        nextBtn.addEventListener('click', () => {
          if (currentSlideIndex < totalSlides - 1)
            showSlide(++currentSlideIndex);
        });
        prevBtn.addEventListener('click', () => {
          if (currentSlideIndex > 0) showSlide(--currentSlideIndex);
        });
        showSlide(0);
      }

      // --- LÓGICA DE LA HERRAMIENTA DE DECISIÓN ---
      function initDecisionTool() {
        const analyzeBtn = document.getElementById('analyze-btn');
        if (!analyzeBtn) return;

        const resultDiv = document.getElementById('decision-result');
        const resultTitle = document.getElementById('result-title');
        const resultRationale = document.getElementById('result-rationale');

        const strategies = {
          'low-low': {
            title: 'Estrategia Segura',
            rationale:
              'AINE no selectivo a la dosis más baja y por el menor tiempo posible. No se requiere gastroprotección de rutina.',
            class: 'safe',
          },
          'high-low': {
            title: 'Estrategia de Protección GI',
            rationale:
              'Usar un AINE no selectivo + un IBP (Inhibidor de Bomba de Protones), o un AINE COX-2 selectivo (COXIB). Si el riesgo GI es muy alto (ej. úlcera complicada previa), se recomienda COXIB + IBP.',
            class: 'warning',
          },
          'low-high': {
            title: 'Estrategia de Protección CV',
            rationale:
              'Usar Naproxeno (considerado con menor riesgo cardiovascular) junto con un IBP para protección gástrica. Evitar AINEs COX-2 selectivos (COXIBs).',
            class: 'warning',
          },
          'high-high': {
            title: '¡ALTO RIESGO! Evitar AINEs',
            rationale:
              'La mejor estrategia es evitar AINEs y COXIBs. Buscar alternativas analgésicas como paracetamol, opioides débiles o terapia física. Si un AINE es absolutamente indispensable, la opción menos perjudicial es Naproxeno + IBP, bajo estricta supervisión.',
            class: 'danger',
          },
        };

        analyzeBtn.addEventListener('click', () => {
          const giRisk = document.querySelector(
            'input[name="gi_risk"]:checked',
          );
          const cvRisk = document.querySelector(
            'input[name="cv_risk"]:checked',
          );

          if (giRisk && cvRisk) {
            const key = `${giRisk.value}-${cvRisk.value}`;
            const strategy = strategies[key];
            resultTitle.textContent = 'Recomendación: ' + strategy.title;
            resultRationale.textContent =
              'Justificación: ' + strategy.rationale;
            resultDiv.className = strategy.class;
            resultDiv.style.display = 'block';
          } else {
            resultTitle.textContent =
              'Por favor, seleccione ambos perfiles de riesgo.';
            resultRationale.textContent = '';
            resultDiv.className = '';
            resultDiv.style.display = 'block';
          }
        });
      }

      // --- LÓGICA DE LA AUTOEVALUACIÓN ---
      function initQuiz() {
        if (!document.getElementById('quiz-container')) return;

        const quizQuestions = [
          {
            question:
              '¿Cuál es el principal mecanismo por el cual los AINEs no selectivos causan daño gástrico?',
            options: [
              'Estimulación directa de la secreción ácida.',
              'Inhibición de la COX-1, reduciendo la síntesis de prostaglandinas citoprotectoras.',
              'Inhibición selectiva de la COX-2.',
              'Aumento del flujo sanguíneo mucoso.',
            ],
            answer:
              'Inhibición de la COX-1, reduciendo la síntesis de prostaglandinas citoprotectoras.',
            feedback:
              'Correcto. La inhibición de la COX-1 disminuye las defensas naturales del estómago, haciéndolo vulnerable al ácido.',
          },
          {
            question:
              'Un paciente de 70 años con historia de úlcera péptica y en tratamiento con corticoides necesita un AINE. ¿Cuál es la estrategia preventiva más adecuada?',
            options: [
              'Tomar el AINE con leche.',
              'Usar un AINE COX-2 selectivo (COXIB) solo.',
              'Usar un AINE no selectivo + un Inhibidor de Bomba de Protones (IBP).',
              'No necesita ninguna prevención especial.',
            ],
            answer:
              'Usar un AINE no selectivo + un Inhibidor de Bomba de Protones (IBP).',
            feedback:
              'Correcto. Este paciente tiene múltiples factores de alto riesgo. La combinación de un AINE con un IBP es una de las estrategias de primera línea para la gastroprotección. Usar un COXIB + IBP sería incluso más seguro.',
          },
          {
            question:
              "La 'Enteropatía por AINEs' se manifiesta comúnmente como:",
            options: [
              'Disfagia y reflujo.',
              'Anemia ferropénica por sangrado crónico oculto.',
              'Gastritis aguda.',
              'Dolor en el pecho.',
            ],
            answer: 'Anemia ferropénica por sangrado crónico oculto.',
            feedback:
              'Correcto. El daño en el intestino delgado a menudo es silencioso y se descubre al investigar una anemia por deficiencia de hierro sin otra causa aparente.',
          },
          {
            question:
              'Verdadero o Falso: Los AINEs COX-2 selectivos (COXIBs) eliminan por completo el riesgo de complicaciones gastrointestinales.',
            options: ['Verdadero', 'Falso'],
            answer: 'Falso',
            feedback:
              'Correcto. Es Falso. Los COXIBs tienen menor riesgo de daño en el tracto GI superior, pero el riesgo no es cero y pueden causar enteropatía.',
          },
          {
            question:
              'En un paciente con alto riesgo cardiovascular que necesita un AINE, ¿cuál es la opción preferida?',
            options: [
              'Cualquier COXIB a dosis altas.',
              'Diclofenaco + IBP.',
              'Naproxeno + IBP.',
              'Ibuprofeno solo.',
            ],
            answer: 'Naproxeno + IBP.',
            feedback:
              'Correcto. El Naproxeno se considera el AINE no selectivo con el perfil de seguridad cardiovascular más favorable, y debe combinarse con un IBP para protección gástrica.',
          },
        ];

        let currentQuestionIndex = 0,
          score = 0;
        const qText = document.getElementById('question-text');
        const qOptions = document.getElementById('quiz-options');
        const fText = document.getElementById('feedback-text');
        const nextBtn = document.getElementById('next-question-btn');
        const resultContainer = document.getElementById(
          'quiz-result-container',
        );
        const scoreText = document.getElementById('score-text');
        const restartBtn = document.getElementById('restart-quiz-btn');

        function showQuestion(index) {
          const q = quizQuestions[index];
          qText.textContent = q.question;
          qOptions.innerHTML = '';
          fText.style.display = 'none';
          nextBtn.style.display = 'none';
          q.options.forEach((opt) => {
            const li = document.createElement('li');
            li.textContent = opt;
            li.addEventListener('click', () =>
              selectAnswer(li, opt, q.answer, q.feedback),
            );
            qOptions.appendChild(li);
          });
        }

        function selectAnswer(li, selected, correct, feedback) {
          qOptions
            .querySelectorAll('li')
            .forEach((o) => (o.style.pointerEvents = 'none'));
          if (selected === correct) {
            li.classList.add('correct');
            fText.innerHTML = `<i class="fa-solid fa-check-circle"></i> ${feedback}`;
            fText.style.color = 'var(--success-color)';
            score++;
          } else {
            li.classList.add('incorrect');
            fText.innerHTML = `<i class="fa-solid fa-times-circle"></i> Incorrecto. ${feedback}`;
            fText.style.color = 'var(--danger-color)';
            qOptions.querySelectorAll('li').forEach((o) => {
              if (o.textContent === correct) o.classList.add('correct');
            });
          }
          fText.style.display = 'block';
          nextBtn.style.display = 'inline-block';
        }

        nextBtn.addEventListener('click', () => {
          currentQuestionIndex++;
          currentQuestionIndex < quizQuestions.length
            ? showQuestion(currentQuestionIndex)
            : showResults();
        });

        restartBtn.addEventListener('click', () => {
          currentQuestionIndex = 0;
          score = 0;
          document.getElementById('quiz-container').style.display = 'block';
          resultContainer.style.display = 'none';
          showQuestion(0);
        });

        function showResults() {
          document.getElementById('quiz-container').style.display = 'none';
          resultContainer.style.display = 'block';
          scoreText.textContent = `Obtuviste ${score} de ${quizQuestions.length} respuestas correctas.`;
        }
        showQuestion(0);
      }
    </script>
  </body>
</html>
