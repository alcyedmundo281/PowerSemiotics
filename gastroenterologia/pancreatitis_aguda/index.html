<<<<<<< HEAD
<!doctype html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pancreatitis Aguda Master Class</title>
  <script type="module" crossorigin src="./assets/index-K7SyDioT.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/index-BEb0M1Xa.css">
</head>

<body>
    <div id="root"></div>
</body>

</html>
=======
<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pancreatitis Aguda Master Class</title>
    <link id="tailwind-local" href="../../assets/tailwind.css" rel="stylesheet" />
    <script>
      (function () {
        const local = document.getElementById('tailwind-local');
        local.addEventListener('error', function () {
          const cdn = document.createElement('script');
          cdn.src = 'https://cdn.tailwindcss.com';
          document.head.appendChild(cdn);
        });
      })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
    />
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
      .section-btn.active {
        background: #2563eb;
        color: #fff;
        transform: scale(1.02);
        box-shadow: 0 10px 18px rgba(37, 99, 235, 0.25);
      }
      .module-tab.active {
        background: #dbeafe;
        color: #1d4ed8;
      }
      .panel {
        display: none;
      }
      .panel.active {
        display: block;
      }
      .progress-bar-shine {
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.4) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        background-size: 200% 100%;
        animation: shine 2s infinite;
      }
      @keyframes shine {
        to {
          background-position: -200% 0;
        }
      }
    </style>
  </head>
  <body class="min-h-screen pb-20 bg-[#f0f4f8] text-gray-800">
    <header class="bg-white p-4 shadow-sm sticky top-0 z-50 border-b border-blue-100">
      <div class="max-w-5xl mx-auto flex items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <div id="levelBadge" class="bg-blue-600 text-white p-2 rounded-lg font-bold shadow-lg">Nivel 1</div>
          <div class="flex flex-col">
            <span class="text-sm font-semibold text-gray-700">Residente de Gastroenterolog√≠a</span>
            <span id="xpText" class="text-xs text-gray-500">0 / 100 XP</span>
          </div>
        </div>
        <div class="w-1/2 bg-gray-200 rounded-full h-4 overflow-hidden relative">
          <div id="xpBar" class="bg-blue-500 h-full transition-all duration-500 progress-bar-shine" style="width:0%"></div>
        </div>
      </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8">
      <section class="mb-12 text-center">
        <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">
          Pancreatitis Aguda <span class="text-blue-600">Master Class</span>
        </h1>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          M√≥dulo interactivo basado en gu√≠as internacionales y fisiopatolog√≠a avanzada.
          Aprende a diagnosticar, estratificar y tratar como un experto.
        </p>
      </section>

      <div class="flex flex-col lg:flex-row gap-8">
        <aside class="lg:w-1/4 space-y-4">
          <button class="section-btn active flex items-center gap-3 p-4 rounded-xl w-full text-left bg-white transition-all" data-section="theory">
            <span class="text-xl">üìò</span><span class="font-semibold flex-1">Teor√≠a & Evidencia</span><span id="doneTheory" class="hidden">‚úÖ</span>
          </button>
          <button class="section-btn flex items-center gap-3 p-4 rounded-xl w-full text-left bg-white transition-all" data-section="sim">
            <span class="text-xl">ü´Ä</span><span class="font-semibold flex-1">Simulador Fisiopatol√≥gico</span><span id="doneSim" class="hidden">‚úÖ</span>
          </button>
          <button class="section-btn flex items-center gap-3 p-4 rounded-xl w-full text-left bg-white transition-all" data-section="case">
            <span class="text-xl">üë§</span><span class="font-semibold flex-1">Caso Cl√≠nico RPG</span><span id="doneCase" class="hidden">‚úÖ</span>
          </button>

          <div class="mt-8 bg-blue-900 rounded-xl p-6 text-white text-center">
            <div class="text-3xl mb-2">üèÖ</div>
            <div class="font-bold">Logros Desbloqueados</div>
            <div id="achievements" class="text-sm text-blue-200 mt-1">0 / 3 Completados</div>
          </div>
        </aside>

        <section class="lg:w-3/4">
          <div id="panel-theory" class="panel active bg-white rounded-2xl shadow-xl overflow-hidden min-h-[500px] flex flex-col md:flex-row">
            <div class="w-full md:w-1/4 bg-gray-50 border-r border-gray-100 p-4 flex flex-col gap-2">
              <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">M√≥dulos Te√≥ricos</h3>
              <button class="module-tab active p-3 text-sm rounded-lg text-left font-medium" data-tab="etiology">1. Etiolog√≠a y Definici√≥n</button>
              <button class="module-tab p-3 text-sm rounded-lg text-left font-medium hover:bg-gray-100" data-tab="patho">2. Fisiopatolog√≠a Avanzada</button>
              <button class="module-tab p-3 text-sm rounded-lg text-left font-medium hover:bg-gray-100" data-tab="complications">3. Complicaciones</button>
              <div class="mt-auto pt-4 border-t">
                <button id="readBtn" class="w-full py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-bold">‚úÖ Marcar como Le√≠do (+50 XP)</button>
              </div>
            </div>
            <div class="flex-1 p-6 md:p-8 overflow-y-auto max-h-[600px]">
              <div id="theoryContent"></div>
            </div>
          </div>

          <div id="panel-sim" class="panel bg-gray-900 text-white rounded-2xl shadow-xl p-8 min-h-[500px] text-center">
            <h2 class="text-3xl font-bold mb-2">Simulador de Fisiopatolog√≠a</h2>
            <p class="text-gray-400 mb-8">Experimenta la cascada desde la lesi√≥n hasta el fallo org√°nico</p>
            <div class="w-full max-w-2xl mx-auto bg-gray-800 rounded-xl p-8 border border-gray-700">
              <div id="simVisual" class="text-6xl mb-4">üü¢</div>
              <h3 id="simTitle" class="text-2xl font-bold mb-2">Estado Basal</h3>
              <p id="simDesc" class="text-gray-300">El p√°ncreas funciona normalmente. Las enzimas (zim√≥genos) est√°n inactivas.</p>
            </div>
            <button id="simAction" class="mt-8 px-8 py-3 bg-blue-600 hover:bg-blue-500 rounded-full font-bold text-lg">Ingerir Alcohol Excesivo / Obstruir con C√°lculo ‚ûú</button>
          </div>

          <div id="panel-case" class="panel bg-white rounded-2xl shadow-xl p-8 max-w-3xl mx-auto border-t-8 border-blue-600">
            <h2 id="caseTitle" class="text-2xl font-bold text-gray-800 mb-3">Urgencias - 08:00 AM</h2>
            <p id="caseDesc" class="text-lg text-gray-700 mb-6 border-l-4 border-gray-300 pl-4 italic"></p>
            <h3 id="caseQuestion" class="font-bold text-gray-900 mb-3"></h3>
            <div id="caseOptions" class="space-y-3"></div>
            <div id="caseFeedback" class="hidden mt-4 p-4 rounded-lg"></div>
          </div>
        </section>
      </div>
    </main>

    <script>
      const state = {
        xp: 0,
        completed: { theory: false, sim: false, case: false },
        activeSection: 'theory',
        simStage: 0,
        caseScene: 'intro',
      };

      const theory = {
        etiology: {
          title: 'Etiolog√≠a y Definici√≥n',
          body: `<div class="space-y-4"><div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500"><h3 class="font-bold text-lg mb-2">Definici√≥n (Atlanta 2012)</h3><ul class="list-disc ml-5 mt-2 space-y-1"><li>Dolor abdominal caracter√≠stico.</li><li>Lipasa/Amilasa ‚â• 3 veces el l√≠mite superior normal.</li><li>Hallazgos caracter√≠sticos en imagen (TC/RM).</li></ul></div><h3 class="font-bold text-xl mt-6 text-gray-800">Mecanismos de Lesi√≥n</h3><ul class="list-disc ml-5 mt-2 space-y-1"><li><strong>Litiasis biliar:</strong> causa m√°s frecuente.</li><li><strong>Alcohol:</strong> da√±o de c√©lula acinar.</li><li><strong>Post-CPRE, hiperTG, hipercalcemia</strong> como causas relevantes.</li></ul></div>`,
        },
        patho: {
          title: 'La Tormenta Perfecta (Fisiopatolog√≠a)',
          body: `<ol class="list-decimal ml-6 space-y-2"><li>Activaci√≥n de tripsina intrapancre√°tica.</li><li>Autodigesti√≥n por elastasa/fosfolipasa.</li><li>SIRS por IL-1, IL-6 y TNF-Œ±.</li><li>Third spacing, hipovolemia y falla multiorg√°nica.</li></ol>`,
        },
        complications: {
          title: 'Cronolog√≠a de Complicaciones',
          body: `<div class="space-y-2"><p><strong>&lt;4 semanas:</strong> colecci√≥n l√≠quida/necr√≥tica aguda.</p><p><strong>&gt;4 semanas:</strong> pseudoquiste o WON.</p><p><strong>Alarmas:</strong> Cullen, Grey Turner, necrosis infectada, s√≠ndrome compartimental.</p></div>`,
        },
      };

      const simStages = [
        ['üü¢', 'Estado Basal', 'El p√°ncreas funciona normalmente.', 'Ingerir Alcohol Excesivo / Obstruir con C√°lculo ‚ûú'],
        ['üü°', 'Activaci√≥n Intracelular', 'Tripsin√≥geno se activa a tripsina.', 'Desencadenar Cascada ‚ûú'],
        ['üü†', 'Autodigesti√≥n', 'Activaci√≥n de elastasa y fosfolipasa.', 'Liberar Citoquinas ‚ûú'],
        ['üî¥', 'Tormenta de Citoquinas (SIRS)', 'Aumenta la permeabilidad vascular sist√©mica.', 'Inducir Fuga Capilar ‚ûú'],
        ['‚ö´', 'Third Spacing & Shock', 'Hipovolemia severa e hipotensi√≥n.', 'Reiniciar Simulaci√≥n ‚ûú'],
      ];

      const scenes = {
        intro: {
          title: 'Urgencias - 08:00 AM',
          desc: '"Masculino de 48 a√±os, dolor epig√°strico irradiado a espalda, lipasa 2500."',
          q: '¬øPrimera orden m√©dica prioritaria?',
          opts: [['TC con contraste inmediata', false, 'TC temprana no es prioritaria para diagn√≥stico.'], ['Antibi√≥ticos profil√°cticos', false, 'No se indican sin infecci√≥n confirmada.'], ['Ringer Lactato 1.5 ml/kg/h', true, 'Correcto: la reanimaci√≥n con fluidos es el pilar inicial.']],
          next: 'evolution',
        },
        evolution: {
          title: 'D√≠a 2 - Evoluci√≥n T√≥rpida',
          desc: '"BUN sube de 20 a 35 y Hto a 47%."',
          q: '¬øQu√© indica?',
          opts: [['Falla renal establecida', false, 'Sugiere m√°s hipovolemia que da√±o intr√≠nseco a√∫n.'], ['Hemoconcentraci√≥n por third spacing', true, 'Correcto: fuga capilar y depleci√≥n intravascular.']],
          next: 'complication',
        },
        complication: {
          title: 'D√≠a 10 - La Fiebre',
          desc: '"Necrosis 40% con gas en TC."',
          q: 'Manejo step-up correcto:',
          opts: [['Cirug√≠a abierta inmediata', false, 'Alta morbimortalidad si se hace de entrada.'], ['Antibi√≥ticos + drenaje percut√°neo/endosc√≥pico', true, 'Correcto: enfoque escalonado m√≠nimo invasivo.']],
          next: 'end',
        },
        end: { title: 'Caso Resuelto', desc: 'üèÜ Excelente manejo. Paciente recuperado tras enfoque escalonado.', q: '', opts: [], next: null },
      };

      const xpText = document.getElementById('xpText');
      const levelBadge = document.getElementById('levelBadge');
      const xpBar = document.getElementById('xpBar');

      function updateXP() {
        const level = Math.floor(state.xp / 100) + 1;
        const next = level * 100;
        levelBadge.textContent = `Nivel ${level}`;
        xpText.textContent = `${state.xp} / ${next} XP`;
        xpBar.style.width = `${Math.min((state.xp / next) * 100, 100)}%`;
        const completedCount = Object.values(state.completed).filter(Boolean).length;
        document.getElementById('achievements').textContent = `${completedCount} / 3 Completados`;
      }

      function addXP(amount, key) {
        if (!state.completed[key]) {
          state.xp += amount;
          state.completed[key] = true;
          document.getElementById(`done${key[0].toUpperCase() + key.slice(1)}`).classList.remove('hidden');
          updateXP();
        }
      }

      function showSection(id) {
        state.activeSection = id;
        document.querySelectorAll('.section-btn').forEach((b) => b.classList.toggle('active', b.dataset.section === id));
        document.querySelectorAll('.panel').forEach((p) => p.classList.remove('active'));
        document.getElementById(`panel-${id}`).classList.add('active');
      }

      function renderTheory(tab = 'etiology') {
        document.querySelectorAll('.module-tab').forEach((b) => b.classList.toggle('active', b.dataset.tab === tab));
        const t = theory[tab];
        document.getElementById('theoryContent').innerHTML = `<h2 class="text-2xl font-bold text-gray-900 mb-6">${t.title}</h2>${t.body}`;
      }

      function renderSim() {
        const [v, t, d, a] = simStages[state.simStage];
        document.getElementById('simVisual').textContent = v;
        document.getElementById('simTitle').textContent = t;
        document.getElementById('simDesc').textContent = d;
        document.getElementById('simAction').textContent = a;
      }

      function renderCase() {
        const s = scenes[state.caseScene];
        document.getElementById('caseTitle').textContent = s.title;
        document.getElementById('caseDesc').textContent = s.desc;
        document.getElementById('caseQuestion').textContent = s.q;
        const box = document.getElementById('caseOptions');
        box.innerHTML = '';
        const fb = document.getElementById('caseFeedback');
        fb.className = 'hidden mt-4 p-4 rounded-lg';
        fb.textContent = '';

        s.opts.forEach(([text, ok, note]) => {
          const btn = document.createElement('button');
          btn.className = 'w-full p-4 text-left rounded-xl border-2 border-gray-100 hover:border-blue-500 hover:bg-blue-50 transition-all font-medium text-gray-700';
          btn.textContent = text;
          btn.onclick = () => {
            fb.className = `mt-4 p-4 rounded-lg ${ok ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
            fb.textContent = note;
            if (ok) {
              const nextBtn = document.createElement('button');
              nextBtn.className = 'ml-3 bg-green-600 text-white px-4 py-2 rounded';
              nextBtn.textContent = s.next ? 'Continuar' : 'Finalizar';
              nextBtn.onclick = () => {
                if (s.next) {
                  state.caseScene = s.next;
                  if (s.next === 'end') addXP(40, 'case');
                  renderCase();
                }
              };
              fb.appendChild(nextBtn);
            }
          };
          box.appendChild(btn);
        });

        if (state.caseScene === 'end') {
          box.innerHTML = '';
          document.getElementById('caseQuestion').textContent = '';
        }
      }

      document.querySelectorAll('.section-btn').forEach((btn) => (btn.onclick = () => showSection(btn.dataset.section)));
      document.querySelectorAll('.module-tab').forEach((btn) => (btn.onclick = () => renderTheory(btn.dataset.tab)));
      document.getElementById('readBtn').onclick = () => addXP(50, 'theory');
      document.getElementById('simAction').onclick = () => {
        if (state.simStage < simStages.length - 1) {
          state.simStage += 1;
          if (state.simStage === 4) addXP(30, 'sim');
        } else {
          state.simStage = 0;
        }
        renderSim();
      };

      updateXP();
      renderTheory();
      renderSim();
      renderCase();
  </head>
  <body class="bg-[#f0f4f8]">
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/lucide-react@0.468.0/dist/umd/lucide-react.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel" data-presets="react">
      const { useState } = React;
      const {
        BookOpen,
        Activity,
        User,
        CheckCircle,
        AlertTriangle,
        ChevronRight,
        Award,
        Stethoscope,
      } = lucideReact;

      const ProgressBar = ({ xp, level, nextLevelXp }) => (
        <div className="bg-white p-4 shadow-sm sticky top-0 z-50 border-b border-blue-100">
          <div className="max-w-5xl mx-auto flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="bg-blue-600 text-white p-2 rounded-lg font-bold shadow-lg">
                Nivel {level}
              </div>
              <div className="flex flex-col">
                <span className="text-sm font-semibold text-gray-700">Residente de Gastroenterolog√≠a</span>
                <span className="text-xs text-gray-500">{xp} / {nextLevelXp} XP</span>
              </div>
            </div>
            <div className="w-1/2 bg-gray-200 rounded-full h-4 overflow-hidden relative">
              <div
                className="bg-blue-500 h-full transition-all duration-500 progress-bar-shine"
                style={{ width: `${Math.min((xp / nextLevelXp) * 100, 100)}%` }}
              ></div>
            </div>
          </div>
        </div>
      );

      const SectionCard = ({ title, icon: Icon, isActive, onClick, completed }) => (
        <button
          onClick={onClick}
          className={`flex items-center gap-3 p-4 rounded-xl w-full text-left transition-all ${
            isActive ? 'bg-blue-600 text-white shadow-lg scale-105' : 'bg-white text-gray-700 hover:bg-blue-50'
          } ${completed ? 'border-r-4 border-green-400' : ''}`}
        >
          <div className={`p-2 rounded-lg ${isActive ? 'bg-blue-500' : 'bg-gray-100 text-blue-600'}`}>
            <Icon size={20} />
          </div>
          <span className="font-semibold flex-1">{title}</span>
          {completed && <CheckCircle size={16} className="text-green-500" />}
        </button>
      );

      const TheoryModule = ({ onComplete }) => {
        const [activeTab, setActiveTab] = useState('etiology');

        const content = {
          etiology: {
            title: 'Etiolog√≠a y Definici√≥n',
            body: (
              <div className="space-y-4">
                <div className="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                  <h3 className="font-bold text-lg mb-2">Definici√≥n (Atlanta 2012)</h3>
                  <p>Proceso inflamatorio agudo del p√°ncreas que requiere <strong>2 de 3 criterios</strong>:</p>
                  <ul className="list-disc ml-5 mt-2 space-y-1">
                    <li>Dolor abdominal caracter√≠stico (epigastrio, irradiado a espalda).</li>
                    <li>Lipasa/Amilasa ‚â• 3 veces el l√≠mite superior normal.</li>
                    <li>Hallazgos caracter√≠sticos en imagen (TC/RM).</li>
                  </ul>
                </div>

                <h3 className="font-bold text-xl mt-6 text-gray-800">Mecanismos de Lesi√≥n (Ninja Nerd Insights)</h3>
                <div className="grid md:grid-cols-2 gap-4">
                  <div className="bg-white p-4 rounded-lg shadow border border-gray-200">
                    <div className="flex items-center gap-2 mb-2 text-red-600">
                      <Activity size={20} />
                      <h4 className="font-bold">Lesi√≥n de C√©lula Acinar</h4>
                    </div>
                    <ul className="text-sm space-y-2 text-gray-600">
                      <li><strong>Alcohol:</strong> Sensibiliza la c√©lula al da√±o oxidativo y libera enzimas prematuramente.</li>
                      <li><strong>Hipertrigliceridemia:</strong> {'>'}1000 mg/dL. Los √°cidos grasos libres son t√≥xicos.</li>
                      <li><strong>Hipercalcemia:</strong> {'>'}14 mg/dL. El calcio activa proteasas intracelulares.</li>
                    </ul>
                  </div>
                  <div className="bg-white p-4 rounded-lg shadow border border-gray-200">
                    <div className="flex items-center gap-2 mb-2 text-amber-600">
                      <AlertTriangle size={20} />
                      <h4 className="font-bold">Lesi√≥n Ductal</h4>
                    </div>
                    <ul className="text-sm space-y-2 text-gray-600">
                      <li><strong>Litiasis Biliar (40%):</strong> Obstrucci√≥n de la ampolla de Vater genera reflujo y aumento de presi√≥n.</li>
                      <li><strong>Post-CPRE:</strong> Trauma directo o hidrost√°tico.</li>
                      <li><strong>Fibrosis Qu√≠stica:</strong> Moco espeso obstruye ductos (causa cr√≥nica agudizada).</li>
                    </ul>
                  </div>
                </div>
              </div>
            ),
          },
          patho: {
            title: 'La Tormenta Perfecta (Fisiopatolog√≠a)',
            body: (
              <div className="space-y-4">
                <p className="text-gray-700">La pancreatitis no es solo una inflamaci√≥n local; es una bomba sist√©mica activada por la autodigesti√≥n.</p>
                <div className="relative pl-8 border-l-2 border-gray-300 space-y-6">
                  <div className="relative">
                    <div className="absolute -left-[41px] bg-red-500 text-white rounded-full p-2 w-8 h-8 flex items-center justify-center font-bold">1</div>
                    <h4 className="font-bold text-gray-900">Activaci√≥n Enzim√°tica (Autodigesti√≥n)</h4>
                    <p className="text-sm text-gray-600">El tripsin√≥geno se convierte en <strong>Tripsina</strong> dentro del p√°ncreas. Esta activa a la Elastasa (da√±o vascular/hemorragia) y Fosfolipasa A2 (necrosis grasa).</p>
                  </div>
                  <div className="relative">
                    <div className="absolute -left-[41px] bg-orange-500 text-white rounded-full p-2 w-8 h-8 flex items-center justify-center font-bold">2</div>
                    <h4 className="font-bold text-gray-900">Respuesta Sist√©mica (SIRS)</h4>
                    <p className="text-sm text-gray-600">Liberaci√≥n masiva de citoquinas (<strong>IL-1, IL-6, TNF-Œ±</strong>) al torrente sangu√≠neo.</p>
                  </div>
                  <div className="relative">
                    <div className="absolute -left-[41px] bg-yellow-500 text-white rounded-full p-2 w-8 h-8 flex items-center justify-center font-bold">3</div>
                    <h4 className="font-bold text-gray-900">&quot;Third Spacing&quot; y Shock</h4>
                    <div className="bg-yellow-50 p-3 rounded text-sm text-gray-700 mt-1">
                      <strong>Concepto Clave Ninja Nerd:</strong> Las citoquinas aumentan la permeabilidad capilar sist√©mica. El l√≠quido se &quot;fuga&quot; de los vasos al espacio intersticial (tercer espacio), causando hipovolemia severa, hipotensi√≥n y shock, incluso si el paciente no pierde sangre visiblemente.
                    </div>
                  </div>
                  <div className="relative">
                    <div className="absolute -left-[41px] bg-purple-600 text-white rounded-full p-2 w-8 h-8 flex items-center justify-center font-bold">4</div>
                    <h4 className="font-bold text-gray-900">Falla Multiorg√°nica</h4>
                    <ul className="text-sm text-gray-600 list-disc ml-4">
                      <li><strong>Pulm√≥n (ARDS):</strong> Edema alveolar por fuga capilar.</li>
                      <li><strong>Ri√±√≥n (AKI):</strong> Necrosis tubular por hipoperfusi√≥n.</li>
                      <li><strong>Coagulaci√≥n (CID):</strong> Consumo de plaquetas/factores. Riesgo de sangrado parad√≥jico.</li>
                    </ul>
                  </div>
                </div>
              </div>
            ),
          },
          complications: {
            title: 'Cronolog√≠a de Complicaciones',
            body: (
              <div className="space-y-6">
                <div className="grid grid-cols-2 gap-4 text-center">
                  <div className="bg-blue-100 p-4 rounded-lg">
                    <h4 className="font-bold text-blue-800"> &lt; 4 Semanas</h4>
                    <div className="text-xs mt-2 space-y-2">
                      <div className="bg-white p-2 rounded shadow-sm"><strong>Colecci√≥n L√≠quida Aguda</strong><br />(En pancreatitis edematosa)</div>
                      <div className="bg-white p-2 rounded shadow-sm border-l-4 border-red-500"><strong>Colecci√≥n Necr√≥tica Aguda</strong><br />(Tejido muerto + l√≠quido)</div>
                    </div>
                  </div>
                  <div className="bg-indigo-100 p-4 rounded-lg">
                    <h4 className="font-bold text-indigo-800"> &gt; 4 Semanas</h4>
                    <div className="text-xs mt-2 space-y-2">
                      <div className="bg-white p-2 rounded shadow-sm"><strong>Pseudoquiste</strong><br />(Pared encapsulada de tejido fibroso)</div>
                      <div className="bg-white p-2 rounded shadow-sm border-l-4 border-red-500"><strong>Walled-off Necrosis (WON)</strong><br />(Necrosis amurallada)</div>
                    </div>
                  </div>
                </div>
                <div className="bg-red-50 p-4 rounded-lg border border-red-200">
                  <h4 className="font-bold text-red-700 flex items-center gap-2"><AlertTriangle size={18} /> Signos de Alarma Hemorr√°gica</h4>
                  <p className="text-sm text-gray-700 mt-1">Si la necrosis erosiona vasos (ej. arteria gastroduodenal):</p>
                  <ul className="list-disc ml-5 mt-2 text-sm text-gray-800">
                    <li><strong>Signo de Cullen:</strong> Equimosis periumbilical.</li>
                    <li><strong>Signo de Grey Turner:</strong> Equimosis en los flancos (sangrado retroperitoneal).</li>
                  </ul>
                </div>
                <div className="bg-gray-800 text-white p-4 rounded-lg">
                  <h4 className="font-bold flex items-center gap-2"><Activity size={18} /> S√≠ndrome Compartimental Abdominal</h4>
                  <p className="text-sm mt-1">Presi√≥n intraabdominal {'>'} 20 mmHg. Comprime vena cava (baja retorno venoso) y ri√±ones. Requiere descompresi√≥n urgente.</p>
                </div>
              </div>
            ),
          },
        };

        return (
          <div className="bg-white rounded-2xl shadow-xl overflow-hidden min-h-[500px] flex flex-col md:flex-row">
            <div className="w-full md:w-1/4 bg-gray-50 border-r border-gray-100 p-4 flex flex-col gap-2">
              <h3 className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">M√≥dulos Te√≥ricos</h3>
              <button onClick={() => setActiveTab('etiology')} className={`p-3 text-sm rounded-lg text-left font-medium ${activeTab === 'etiology' ? 'bg-blue-100 text-blue-700' : 'hover:bg-gray-100'}`}>1. Etiolog√≠a y Definici√≥n</button>
              <button onClick={() => setActiveTab('patho')} className={`p-3 text-sm rounded-lg text-left font-medium ${activeTab === 'patho' ? 'bg-blue-100 text-blue-700' : 'hover:bg-gray-100'}`}>2. Fisiopatolog√≠a Avanzada</button>
              <button onClick={() => setActiveTab('complications')} className={`p-3 text-sm rounded-lg text-left font-medium ${activeTab === 'complications' ? 'bg-blue-100 text-blue-700' : 'hover:bg-gray-100'}`}>3. Complicaciones</button>
              <div className="mt-auto pt-4 border-t">
                <button
                  onClick={onComplete}
                  className="w-full py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2"
                >
                  <CheckCircle size={16} /> Marcar como Le√≠do (+50 XP)
                </button>
              </div>
            </div>
            <div className="flex-1 p-6 md:p-8 overflow-y-auto max-h-[600px]">
              <h2 className="text-2xl font-bold text-gray-900 mb-6">{content[activeTab].title}</h2>
              <div className="prose max-w-none">{content[activeTab].body}</div>
            </div>
          </div>
        );
      };

      const PathoSimulator = ({ onComplete }) => {
        const [stage, setStage] = useState(0);

        const stages = [
          { title: 'Estado Basal', desc: 'El p√°ncreas funciona normalmente. Las enzimas (zim√≥genos) est√°n inactivas.', visual: 'üü¢ P√°ncreas Feliz', action: 'Ingerir Alcohol Excesivo / Obstruir con C√°lculo' },
          { title: 'Activaci√≥n Intracelular', desc: '¬°Alerta! El tripsin√≥geno se activa a TRIPSINA dentro de la c√©lula acinar.', visual: 'üü° Activaci√≥n Enzim√°tica', action: 'Desencadenar Cascada' },
          { title: 'Autodigesti√≥n', desc: 'La tripsina activa Elastasa y Fosfolipasa. Se digieren vasos y grasa pancre√°tica.', visual: 'üü† Da√±o Local', action: 'Liberar Citoquinas' },
          { title: 'Tormenta de Citoquinas (SIRS)', desc: 'IL-1, IL-6 y TNF-Œ± entran a la sangre. Aumenta la permeabilidad vascular sist√©mica.', visual: 'üî¥ Inflamaci√≥n Sist√©mica', action: 'Inducir Fuga Capilar' },
          { title: 'Third Spacing & Shock', desc: 'El l√≠quido intravascular se fuga al intersticio. Hipovolemia masiva -> Hipotensi√≥n -> Falla Renal.', visual: '‚ö´ Shock Hipovol√©mico', action: 'Reiniciar Simulaci√≥n' },
        ];

        const handleAction = () => {
          if (stage < stages.length - 1) {
            setStage(stage + 1);
            if (stage === 3) onComplete();
          } else {
            setStage(0);
          }
        };

        return (
          <div className="bg-gray-900 text-white rounded-2xl shadow-xl p-8 flex flex-col items-center justify-center min-h-[500px] text-center">
            <h2 className="text-3xl font-bold mb-2">Simulador de Fisiopatolog√≠a</h2>
            <p className="text-gray-400 mb-8">Experimenta la cascada desde la lesi√≥n hasta el fallo org√°nico</p>
            <div className="w-full max-w-2xl bg-gray-800 rounded-xl p-8 border border-gray-700 relative overflow-hidden">
              <div className={`transition-all duration-500 transform ${stage === 4 ? 'scale-110 animate-pulse' : 'scale-100'}`}>
                <div className="text-6xl mb-4">{stages[stage].visual.split(' ')[0]}</div>
                <h3 className="text-2xl font-bold mb-2">{stages[stage].title}</h3>
                <p className="text-gray-300">{stages[stage].desc}</p>
              </div>
              {stage >= 3 && (
                <div className="mt-6 bg-black rounded-full h-4 w-full overflow-hidden border border-gray-600">
                  <div className="h-full bg-blue-500 transition-all duration-1000" style={{ width: stage === 4 ? '20%' : '100%' }}></div>
                  <div className="text-xs text-center -mt-3.5 text-white font-mono mix-blend-difference">VOLUMEN SANGU√çNEO</div>
                </div>
              )}
            </div>
            <button
              onClick={handleAction}
              className="mt-8 px-8 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-bold text-lg shadow-lg hover:shadow-blue-500/50 transition-all transform hover:-translate-y-1 active:scale-95 flex items-center gap-2"
            >
              {stages[stage].action} <ChevronRight size={20} />
            </button>
          </div>
        );
      };

      const ClinicalCase = ({ onComplete }) => {
        const [scene, setScene] = useState('intro');
        const [feedback, setFeedback] = useState(null);

        const handleDecision = (correct, feedbackText) => {
          setFeedback({ correct, text: feedbackText });
        };

        const nextScene = (next) => {
          setFeedback(null);
          setScene(next);
          if (next === 'end') onComplete();
        };

        const scenes = {
          intro: {
            title: 'Urgencias - 08:00 AM',
            desc: 'Masculino de 48 a√±os. Dolor epig√°strico intenso irradiado a espalda (10/10). Antecedente de alcoholismo social y c√≥licos biliares. TA: 125/80, FC: 110. Lipasa: 2500.',
            question: '¬øCu√°l es tu primera orden m√©dica prioritaria?',
            options: [
              { text: 'TC Abdomen con Contraste Inmediata', correct: false, feedback: 'Incorrecto. La TC temprana (<72h) subestima la necrosis y no se requiere para diagn√≥stico si ya tienes cl√≠nica + lipasa.' },
              { text: 'Antibi√≥ticos Profil√°cticos (Imipenem)', correct: false, feedback: 'Incorrecto. Los antibi√≥ticos no previenen la infecci√≥n de la necrosis est√©ril. Solo se usan si hay infecci√≥n confirmada.' },
              { text: 'Ringer Lactato 1.5 ml/kg/h', correct: true, feedback: '¬°Correcto! La reanimaci√≥n con fluidos es el pilar #1 para prevenir la hipoperfusi√≥n y necrosis pancre√°tica.' },
            ],
            next: 'evolution',
          },
          evolution: {
            title: 'D√≠a 2 - Evoluci√≥n T√≥rpida',
            desc: 'A pesar de l√≠quidos, persiste taquic√°rdico. BUN sube de 20 a 35 mg/dL. Hto sube a 47%.',
            question: '¬øQu√© indica esta elevaci√≥n del BUN y Hematocrito?',
            options: [
              { text: 'Falla Renal establecida', correct: false, feedback: 'No necesariamente da√±o intr√≠nseco a√∫n, pero indica hipovolemia severa.' },
              { text: "Hemoconcentraci√≥n por 'Third Spacing'", correct: true, feedback: '¬°Exacto! El l√≠quido se est√° fugando al tercer espacio. El paciente est√° intravascularmente seco a pesar de tu manejo. Necesita m√°s fluidos (con cuidado).' },
              { text: 'Sangrado retroperitoneal', correct: false, feedback: 'El sangrado bajar√≠a el hematocrito, no lo subir√≠a.' },
            ],
            next: 'complication',
          },
          complication: {
            title: 'D√≠a 10 - La Fiebre',
            desc: 'El paciente estaba mejorando, pero hoy presenta fiebre de 39¬∞C y Leucocitos 18,000. TC muestra necrosis del 40% con gas en su interior.',
            question: "Diagn√≥stico: Necrosis Infectada. ¬øCu√°l es el manejo 'Step-Up'?",
            options: [
              { text: 'Cirug√≠a abierta inmediata (Necrosectom√≠a)', correct: false, feedback: '¬°Alto riesgo! La cirug√≠a abierta temprana tiene alt√≠sima mortalidad.' },
              { text: 'Antibi√≥ticos + Drenaje Percut√°neo/Endosc√≥pico', correct: true, feedback: "¬°Excelente! El enfoque 'Step-Up' inicia con antibi√≥ticos y drenaje m√≠nimamente invasivo. La cirug√≠a se deja como √∫ltimo recurso." },
            ],
            next: 'end',
          },
          end: {
            title: 'Caso Resuelto',
            desc: 'Gracias a tu manejo escalonado, el paciente se recuper√≥ tras 4 semanas de drenaje percut√°neo y posterior colecistectom√≠a.',
            visual: 'üèÜ',
            final: true,
          },
        };

        const current = scenes[scene];

        return (
          <div className="bg-white rounded-2xl shadow-xl p-8 max-w-3xl mx-auto border-t-8 border-blue-600">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-2xl font-bold text-gray-800 flex items-center gap-2">
                <Stethoscope className="text-blue-600" /> {current.title}
              </h2>
              {scene !== 'intro' && scene !== 'end' && <span className="text-xs font-mono bg-gray-200 px-2 py-1 rounded">Ranson Score: Alto</span>}
            </div>

            {current.final ? (
              <div className="text-center py-10">
                <div className="text-6xl mb-4">{current.visual}</div>
                <p className="text-xl text-gray-700">{current.desc}</p>
              </div>
            ) : (
              <>
                <p className="text-lg text-gray-700 mb-6 border-l-4 border-gray-300 pl-4 italic">
                  &quot;{current.desc}&quot;
                </p>
                {!feedback ? (
                  <div className="space-y-3">
                    <h3 className="font-bold text-gray-900 mb-2">{current.question}</h3>
                    {current.options.map((opt, idx) => (
                      <button
                        key={idx}
                        onClick={() => handleDecision(opt.correct, opt.feedback)}
                        className="w-full p-4 text-left rounded-xl border-2 border-gray-100 hover:border-blue-500 hover:bg-blue-50 transition-all font-medium text-gray-700"
                      >
                        {opt.text}
                      </button>
                    ))}
                  </div>
                ) : (
                  <div className={`p-6 rounded-xl text-center animate-pulse ${feedback.correct ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                    <div className="font-bold text-xl mb-2">{feedback.correct ? '¬°Correcto!' : 'Incorrecto'}</div>
                    <p className="mb-4">{feedback.text}</p>
                    {feedback.correct ? (
                      <button onClick={() => nextScene(current.next)} className="bg-green-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-green-700">Continuar</button>
                    ) : (
                      <button onClick={() => setFeedback(null)} className="bg-red-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-red-700">Intentar de nuevo</button>
                    )}
                  </div>
                )}
              </>
            )}
          </div>
        );
      };

      function App() {
        const [xp, setXp] = useState(0);
        const [activeSection, setActiveSection] = useState('theory');
        const [completedSections, setCompletedSections] = useState({ theory: false, sim: false, case: false });

        const level = Math.floor(xp / 100) + 1;
        const nextLevelXp = level * 100;

        const addXp = (amount, sectionKey) => {
          if (sectionKey && !completedSections[sectionKey]) {
            setXp(prev => prev + amount);
            setCompletedSections(prev => ({ ...prev, [sectionKey]: true }));
          }
        };

        const renderSection = () => {
          switch (activeSection) {
            case 'theory': return <TheoryModule onComplete={() => addXp(50, 'theory')} />;
            case 'sim': return <PathoSimulator onComplete={() => addXp(30, 'sim')} />;
            case 'case': return <ClinicalCase onComplete={() => addXp(40, 'case')} />;
            default: return <TheoryModule />;
          }
        };

        return (
          <div className="min-h-screen pb-20 bg-[#f0f4f8]" style={{ fontFamily: "'Inter', sans-serif" }}>
            <style>{`
              .fade-in { animation: fadeIn 0.5s ease-in; }
              @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
              .progress-bar-shine {
                background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100%);
                background-size: 200% 100%;
                animation: shine 2s infinite;
              }
              @keyframes shine { to { background-position: -200% 0; } }
            `}</style>

            <ProgressBar xp={xp} level={level} nextLevelXp={nextLevelXp} />

            <div className="max-w-7xl mx-auto px-4 py-8">
              <div className="mb-12 text-center">
                <h1 className="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 tracking-tight">
                  Pancreatitis Aguda <span className="text-blue-600">Master Class</span>
                </h1>
                <p className="text-lg text-gray-600 max-w-2xl mx-auto">
                  M√≥dulo interactivo basado en gu√≠as internacionales y fisiopatolog√≠a avanzada.
                  Aprende a diagnosticar, estratificar y tratar como un experto.
                </p>
              </div>

              <div className="flex flex-col lg:flex-row gap-8">
                <div className="lg:w-1/4 space-y-4">
                  <SectionCard
                    title="Teor√≠a & Evidencia"
                    icon={BookOpen}
                    isActive={activeSection === 'theory'}
                    onClick={() => setActiveSection('theory')}
                    completed={completedSections.theory}
                  />
                  <SectionCard
                    title="Simulador Fisiopatol√≥gico"
                    icon={Activity}
                    isActive={activeSection === 'sim'}
                    onClick={() => setActiveSection('sim')}
                    completed={completedSections.sim}
                  />
                  <SectionCard
                    title="Caso Cl√≠nico RPG"
                    icon={User}
                    isActive={activeSection === 'case'}
                    onClick={() => setActiveSection('case')}
                    completed={completedSections.case}
                  />

                  <div className="mt-8 bg-blue-900 rounded-xl p-6 text-white text-center">
                    <Award className="mx-auto mb-2 text-yellow-400" size={32} />
                    <div className="font-bold">Logros Desbloqueados</div>
                    <div className="text-sm text-blue-200 mt-1">
                      {Object.values(completedSections).filter(Boolean).length} / 3 Completados
                    </div>
                  </div>
                </div>

                <div className="lg:w-3/4 fade-in">
                  {renderSection()}
                </div>
              </div>
            </div>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
  </body>
</html>
>>>>>>> 3df98f1df36351ed8992a7f159a34d112df5ad47
